<div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none">
  <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
  <input #gb type="text" pInputText size="50" placeholder="Global Filter">
</div>

<div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none">
  <span class="ui-widget">Choose benchmark feature(s):</span>
  <p-multiSelect [options]="this.benchmarkFilters" styleClass="ui-column-filter" (onChange)="onFeatureChosen($event)"></p-multiSelect>
</div>

<p-dataTable scrollable="true" scrollWidth="100%" scrollHeight="100%" [value]="this.benchmarkGroups" [rows]="10" [paginator]="true"
  paginatorPosition="both" [globalFilter]="gb" #dt>

  <p-column field="containerInfo.Name" [filter]="true" [style]="{'width':'200px'}">
    <ng-template pTemplate="body" let-ioc="rowData.containerInfo">
      <benchmark-ioc [container]="ioc"></benchmark-ioc>
    </ng-template>
  </p-column>

  <p-headerColumnGroup>
    <p-row>
      <p-column [style]="{'width':'200px'}" header="IoC" rowspan="2" filterMatchMode="in" field="containerInfo.Name">
        <ng-template pTemplate="filter" let-col>
          <p-multiSelect appendTo="body" [options]="this.iocFilters" (onChange)="dt.filter($event.value,col.field,col.filterMatchMode)"
            defaultLabel="All" styleClass="ui-column-filter"></p-multiSelect>
        </ng-template>
      </p-column>
      <p-column [style]="{'width':'200px'}" *ngFor="let feature of this.selectedFeatures" [header]="feature.Name" colspan="2"></p-column>
    </p-row>
    <p-row>
      <ng-container *ngFor="let feature of this.selectedFeatures;let i=index">
        <p-column [style]="{'width':'100px'}" header="Single Thread" [field]="i+'.Single'" sortable="custom" (sortFunction)="dtOnSort($event,dt)"></p-column>
        <p-column [style]="{'width':'100px'}" header="Multi Thread" [field]="i+'.Multi'" sortable="custom" (sortFunction)="dtOnSort($event,dt)"></p-column>
      </ng-container>
    </p-row>
  </p-headerColumnGroup>

  <ng-container *ngFor="let feature of this.selectedFeatures; let i=index;">

    <p-column [style]="{'width':'100px'}" field="benchmarks[i].singleThreadedResult.Time">
      <ng-template pTemplate="body" let-bench="rowData">
        <benchmark-measurement [measurement]="bench.benchmarks[i].singleThreadedResult" [maxTime]="bench.benchmarks[i].maxTimeInSingleThread"
          [rank]="bench.benchmarks[i].rankInSingleThread"></benchmark-measurement>
      </ng-template>
    </p-column>

    <p-column [style]="{'width':'100px'}" field="benchmarks[i].multiThreadedResult.Time">
      <ng-template pTemplate="body" let-bench="rowData">
        <benchmark-measurement [measurement]="bench.benchmarks[i].multiThreadedResult" [maxTime]="bench.benchmarks[i].maxTimeInMultiThread"
          [rank]="bench.benchmarks[i].rankInMultiThread"></benchmark-measurement>
      </ng-template>
    </p-column>

  </ng-container>

</p-dataTable>

<!-- <button type="button" (click)="testOrder()">dsfds</button>
<p-dataTable [value]="this.testdata">
  <p-column field="IOC" header="IoC"></p-column>
  <p-column header="Feature">
    <ng-template let-benches="rowData.benches">
      <div>{{benches.single}}</div>
      <div>{{benches.multi}}</div>
    </ng-template>
  </p-column>
</p-dataTable> -->